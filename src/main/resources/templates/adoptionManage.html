#parse("common/header.html")
<body>

<div class="container-fluid adoption-main">
	<div class="row">
		<div class="col-sm-12 col-md-12 col-lg-12">
			<h1 class="font-big">
            	领养申请管理
        	</h1>
			<table class="table waiter-list">
				<thead>
					<tr>
						<th>宠物种类</th>
						<th>宠物年龄</th>
						<th>宠物名字</th>
						<th>申请人用户名</th>
						<th>申请人真实姓名</th>
						<th>申请人性别</th>
						<th>申请人地址</th>
						<th>申请时间</th>
						<th>申请状态</th>
						<th></th>
					</tr>
				</thead>
				<tbody>
				#foreach($kv in $allAdoptionMap.entrySet())
				<tr>
					<td>$kv.value.type</td>
					<td>$kv.value.age</td>
					<td>$kv.value.name</td>
					<td>$kv.key.userName</td>
					<td>$kv.key.realName</td>
					<td>$kv.key.sex</td>
					<td>$kv.key.address</td>
					<td>$kv.key.createTime</td>
					#if($kv.key.state == 0)
					<td>未通过</td>
					#else
					<td>已通过</td>
					#end
					<td>
					<button type="button" onclick='setAdoptInfoId($kv.key.id)'
                    		class="btn btn-warning" data-toggle="modal" data-target="#audit">审核</button>
					</td>
				</tr>
				#end
				</tbody>
			</table>
		</div>
	</div>
</div>

<div class="modal fade" id="audit" tabindex="-1" role="dialog"
     aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"
                        aria-hidden="true">×
                </button>
                <h4 class="modal-title" id="myModalLabel_1">
                	领养申请审核
                </h4>
             </div>
             <div class="modal-body">
             	<button type="button" onclick="auditAdoption('y')"
                    	class="btn btn-success pull-left">批准</button>
                 <button type="button" onclick="auditAdoption('n')"
                    	class="btn btn-warning pull-right">不批准</button>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

<script type="text/javascript">
var adoptInfoId;
function setAdoptInfoId(id) {
	adoptInfoId = id;
}
function auditAdoption(result){
	var param = {};
	param.adoptInfoId = adoptInfoId;
	if(result == "y"){
		param.result = "yes";
	}else{
		param.result = "no";
	}
	$.post('audit', param, function (r) {
		alert(r);
		location.replace(location.href);
	});
}
</script>

#parse("common/footer.html")
</body>
</html>